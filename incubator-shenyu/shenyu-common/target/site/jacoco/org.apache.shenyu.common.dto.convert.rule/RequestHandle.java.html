<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RequestHandle.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">shenyu-common</a> &gt; <a href="index.source.html" class="el_package">org.apache.shenyu.common.dto.convert.rule</a> &gt; <span class="el_source">RequestHandle.java</span></div><h1>RequestHandle.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.apache.shenyu.common.dto.convert.rule;

import org.apache.commons.collections4.CollectionUtils;
import org.apache.commons.collections4.MapUtils;

import java.util.Map;
import java.util.Objects;
import java.util.Set;

/**
 * this is RequestHandle plugin handle.
 */
<span class="nc" id="L30">public class RequestHandle {</span>
    
    private ShenyuRequestHeader header;

    private ShenyuRequestParameter parameter;

    private ShenyuCookie cookie;

    /**
     * get header.
     *
     * @return header
     */
    public ShenyuRequestHeader getHeader() {
<span class="nc" id="L44">        return header;</span>
    }

    /**
     * set header.
     *
     * @param header header
     */
    public void setHeader(final ShenyuRequestHeader header) {
<span class="nc" id="L53">        this.header = header;</span>
<span class="nc" id="L54">    }</span>

    /**
     * get parameter.
     *
     * @return parameter
     */
    public ShenyuRequestParameter getParameter() {
<span class="nc" id="L62">        return parameter;</span>
    }

    /**
     * set parameter.
     *
     * @param parameter parameter
     */
    public void setParameter(final ShenyuRequestParameter parameter) {
<span class="nc" id="L71">        this.parameter = parameter;</span>
<span class="nc" id="L72">    }</span>

    /**
     * get cookie.
     *
     * @return cookie
     */
    public ShenyuCookie getCookie() {
<span class="nc" id="L80">        return cookie;</span>
    }

    /**
     * set cookie.
     *
     * @param cookie cookie
     */
    public void setCookie(final ShenyuCookie cookie) {
<span class="nc" id="L89">        this.cookie = cookie;</span>
<span class="nc" id="L90">    }</span>

    @Override
    public boolean equals(final Object o) {
<span class="nc bnc" id="L94" title="All 2 branches missed.">        if (this == o) {</span>
<span class="nc" id="L95">            return true;</span>
        }
<span class="nc bnc" id="L97" title="All 4 branches missed.">        if (o == null || getClass() != o.getClass()) {</span>
<span class="nc" id="L98">            return false;</span>
        }
<span class="nc" id="L100">        RequestHandle that = (RequestHandle) o;</span>
<span class="nc bnc" id="L101" title="All 6 branches missed.">        return Objects.equals(header, that.header) &amp;&amp; Objects.equals(parameter, that.parameter) &amp;&amp; Objects.equals(cookie, that.cookie);</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L106">        return Objects.hash(header, parameter, cookie);</span>
    }

    @Override
    public String toString() {
<span class="nc" id="L111">        return &quot;RequestHandle{&quot;</span>
                + &quot;header=&quot;
                + header
                + &quot;, parameter=&quot;
                + parameter
                + &quot;, cookie=&quot;
                + cookie
                + '}';
    }

    /**
     * is empty config.
     *
     * @return empty is true
     */
    public boolean isEmptyConfig() {
<span class="nc bnc" id="L127" title="All 2 branches missed.">        return !isNotEmptyConfig();</span>
    }

    /**
     * is not empty config.
     *
     * @return not empty is true
     */
    private boolean isNotEmptyConfig() {
<span class="nc bnc" id="L136" title="All 6 branches missed.">        return header.isNotEmptyConfig() || parameter.isNotEmptyConfig() || cookie.isNotEmptyConfig();</span>
    }

    public class ShenyuRequestHeader {
        /**
         * need to be appended new header value.
         */
        private Map&lt;String, String&gt; addHeaders;

        /**
         * new headerKey replaces old headerKey.
         * key: oldHeaderKey, value: newHeaderKey.
         */
        private Map&lt;String, String&gt; replaceHeaderKeys;

        /**
         * need to be covered header value.
         * key: oldHeaderKey, value: newHeaderValue.
         */
        private Map&lt;String, String&gt; setHeaders;

        /**
         * need to be removed headerKey.
         */
        private Set&lt;String&gt; removeHeaderKeys;

        /**
         * no args constructor.
         */
<span class="nc" id="L165">        public ShenyuRequestHeader() {</span>
<span class="nc" id="L166">        }</span>

        /**
         * all args constructor.
         *
         * @param addHeaders        addHeaders
         * @param replaceHeaderKeys replaceHeaderKeys
         * @param setHeaders        setHeaders
         * @param removeHeaderKeys  removeHeaderKeys
         */
        public ShenyuRequestHeader(final Map&lt;String, String&gt; addHeaders, final Map&lt;String, String&gt; replaceHeaderKeys,
<span class="nc" id="L177">                                   final Map&lt;String, String&gt; setHeaders, final Set&lt;String&gt; removeHeaderKeys) {</span>
<span class="nc" id="L178">            this.addHeaders = addHeaders;</span>
<span class="nc" id="L179">            this.replaceHeaderKeys = replaceHeaderKeys;</span>
<span class="nc" id="L180">            this.setHeaders = setHeaders;</span>
<span class="nc" id="L181">            this.removeHeaderKeys = removeHeaderKeys;</span>
<span class="nc" id="L182">        }</span>

        /**
         * get addHeaders.
         *
         * @return addHeaders
         */
        public Map&lt;String, String&gt; getAddHeaders() {
<span class="nc" id="L190">            return addHeaders;</span>
        }

        /**
         * set addHeaders.
         *
         * @param addHeaders addHeaders
         */
        public void setAddHeaders(final Map&lt;String, String&gt; addHeaders) {
<span class="nc" id="L199">            this.addHeaders = addHeaders;</span>
<span class="nc" id="L200">        }</span>

        /**
         * get replaceHeaderKeys.
         *
         * @return replaceHeaderKeys
         */
        public Map&lt;String, String&gt; getReplaceHeaderKeys() {
<span class="nc" id="L208">            return replaceHeaderKeys;</span>
        }

        /**
         * set replaceHeaderKeys.
         *
         * @param replaceHeaderKeys replaceHeaderKeys
         */
        public void setReplaceHeaderKeys(final Map&lt;String, String&gt; replaceHeaderKeys) {
<span class="nc" id="L217">            this.replaceHeaderKeys = replaceHeaderKeys;</span>
<span class="nc" id="L218">        }</span>

        /**
         * get setHeaders.
         *
         * @return setHeaders
         */
        public Map&lt;String, String&gt; getSetHeaders() {
<span class="nc" id="L226">            return setHeaders;</span>
        }

        /**
         * set setHeaders.
         *
         * @param setHeaders setHeaders
         */
        public void setSetHeaders(final Map&lt;String, String&gt; setHeaders) {
<span class="nc" id="L235">            this.setHeaders = setHeaders;</span>
<span class="nc" id="L236">        }</span>

        /**
         * get removeHeaderKeys.
         *
         * @return removeHeaderKeys
         */
        public Set&lt;String&gt; getRemoveHeaderKeys() {
<span class="nc" id="L244">            return removeHeaderKeys;</span>
        }

        /**
         * set removeHeaderKeys.
         *
         * @param removeHeaderKeys removeHeaderKeys
         */
        public void setRemoveHeaderKeys(final Set&lt;String&gt; removeHeaderKeys) {
<span class="nc" id="L253">            this.removeHeaderKeys = removeHeaderKeys;</span>
<span class="nc" id="L254">        }</span>

        @Override
        public boolean equals(final Object o) {
<span class="nc bnc" id="L258" title="All 2 branches missed.">            if (this == o) {</span>
<span class="nc" id="L259">                return true;</span>
            }
<span class="nc bnc" id="L261" title="All 4 branches missed.">            if (o == null || getClass() != o.getClass()) {</span>
<span class="nc" id="L262">                return false;</span>
            }
<span class="nc" id="L264">            ShenyuRequestHeader that = (ShenyuRequestHeader) o;</span>
<span class="nc bnc" id="L265" title="All 4 branches missed.">            return Objects.equals(addHeaders, that.addHeaders) &amp;&amp; Objects.equals(replaceHeaderKeys, that.replaceHeaderKeys)</span>
<span class="nc bnc" id="L266" title="All 4 branches missed.">                    &amp;&amp; Objects.equals(setHeaders, that.setHeaders) &amp;&amp; Objects.equals(removeHeaderKeys, that.removeHeaderKeys);</span>
        }

        @Override
        public int hashCode() {
<span class="nc" id="L271">            return Objects.hash(addHeaders, replaceHeaderKeys, setHeaders, removeHeaderKeys);</span>
        }

        @Override
        public String toString() {
<span class="nc" id="L276">            return &quot;ShenyuRequestHeader{&quot;</span>
                    + &quot;addHeaders=&quot;
                    + addHeaders
                    + &quot;, replaceHeaderKeys=&quot;
                    + replaceHeaderKeys
                    + &quot;, setHeaders=&quot;
                    + setHeaders
                    + &quot;, removeHeaderKeys=&quot;
                    + removeHeaderKeys
                    + '}';
        }

        /**
         * is not empty config.
         *
         * @return not empty is true
         */
        public boolean isNotEmptyConfig() {
<span class="nc bnc" id="L294" title="All 4 branches missed.">            return MapUtils.isNotEmpty(addHeaders) || MapUtils.isNotEmpty(replaceHeaderKeys)</span>
<span class="nc bnc" id="L295" title="All 4 branches missed.">                    || MapUtils.isNotEmpty(setHeaders) || CollectionUtils.isNotEmpty(removeHeaderKeys);</span>
        }
    }

    public class ShenyuRequestParameter {

        private Map&lt;String, String&gt; addParameters;

        private Map&lt;String, String&gt; replaceParameterKeys;

        private Map&lt;String, String&gt; setParameters;

        private Set&lt;String&gt; removeParameterKeys;

        /**
         * no args constructor.
         */
<span class="nc" id="L312">        public ShenyuRequestParameter() {</span>
<span class="nc" id="L313">        }</span>

        /**
         * all args constructor.
         *
         * @param addParameters        addParameters
         * @param replaceParameterKeys replaceParameterKeys
         * @param setParameters        setParameters
         * @param removeParameterKeys  removeParameterKeys
         */
        public ShenyuRequestParameter(final Map&lt;String, String&gt; addParameters, final Map&lt;String, String&gt; replaceParameterKeys,
<span class="nc" id="L324">                                      final Map&lt;String, String&gt; setParameters, final Set&lt;String&gt; removeParameterKeys) {</span>
<span class="nc" id="L325">            this.addParameters = addParameters;</span>
<span class="nc" id="L326">            this.replaceParameterKeys = replaceParameterKeys;</span>
<span class="nc" id="L327">            this.setParameters = setParameters;</span>
<span class="nc" id="L328">            this.removeParameterKeys = removeParameterKeys;</span>
<span class="nc" id="L329">        }</span>

        /**
         * get addParameters.
         *
         * @return addParameters
         */
        public Map&lt;String, String&gt; getAddParameters() {
<span class="nc" id="L337">            return addParameters;</span>
        }

        /**
         * set addParameters.
         *
         * @param addParameters addParameters
         */
        public void setAddParameters(final Map&lt;String, String&gt; addParameters) {
<span class="nc" id="L346">            this.addParameters = addParameters;</span>
<span class="nc" id="L347">        }</span>

        /**
         * get replaceParameterKeys.
         *
         * @return replaceParameterKeys
         */
        public Map&lt;String, String&gt; getReplaceParameterKeys() {
<span class="nc" id="L355">            return replaceParameterKeys;</span>
        }

        /**
         * set replaceParameterKeys.
         *
         * @param replaceParameterKeys replaceParameterKeys
         */
        public void setReplaceParameterKeys(final Map&lt;String, String&gt; replaceParameterKeys) {
<span class="nc" id="L364">            this.replaceParameterKeys = replaceParameterKeys;</span>
<span class="nc" id="L365">        }</span>

        /**
         * get setParameters.
         *
         * @return setParameters
         */
        public Map&lt;String, String&gt; getSetParameters() {
<span class="nc" id="L373">            return setParameters;</span>
        }

        /**
         * set setParameters.
         *
         * @param setParameters setParameters
         */
        public void setSetParameters(final Map&lt;String, String&gt; setParameters) {
<span class="nc" id="L382">            this.setParameters = setParameters;</span>
<span class="nc" id="L383">        }</span>

        /**
         * get removeParameterKeys.
         *
         * @return removeParameterKeys
         */
        public Set&lt;String&gt; getRemoveParameterKeys() {
<span class="nc" id="L391">            return removeParameterKeys;</span>
        }

        /**
         * set removeParameterKeys.
         *
         * @param removeParameterKeys removeParameterKeys
         */
        public void setRemoveParameterKeys(final Set&lt;String&gt; removeParameterKeys) {
<span class="nc" id="L400">            this.removeParameterKeys = removeParameterKeys;</span>
<span class="nc" id="L401">        }</span>

        @Override
        public boolean equals(final Object o) {
<span class="nc bnc" id="L405" title="All 2 branches missed.">            if (this == o) {</span>
<span class="nc" id="L406">                return true;</span>
            }
<span class="nc bnc" id="L408" title="All 4 branches missed.">            if (o == null || getClass() != o.getClass()) {</span>
<span class="nc" id="L409">                return false;</span>
            }
<span class="nc" id="L411">            ShenyuRequestParameter that = (ShenyuRequestParameter) o;</span>
<span class="nc bnc" id="L412" title="All 4 branches missed.">            return Objects.equals(addParameters, that.addParameters) &amp;&amp; Objects.equals(replaceParameterKeys, that.replaceParameterKeys)</span>
<span class="nc bnc" id="L413" title="All 4 branches missed.">                    &amp;&amp; Objects.equals(setParameters, that.setParameters) &amp;&amp; Objects.equals(removeParameterKeys, that.removeParameterKeys);</span>
        }

        @Override
        public String toString() {
<span class="nc" id="L418">            return &quot;ShenyuRequestParameter{&quot;</span>
                    + &quot;addParameters=&quot;
                    + addParameters
                    + &quot;, replaceParameterKeys=&quot;
                    + replaceParameterKeys
                    + &quot;, setParameters=&quot;
                    + setParameters
                    + &quot;, removeParameterKeys=&quot;
                    + removeParameterKeys
                    + '}';
        }

        @Override
        public int hashCode() {
<span class="nc" id="L432">            return Objects.hash(addParameters, replaceParameterKeys, setParameters, removeParameterKeys);</span>
        }

        /**
         * is not empty config.
         *
         * @return not empty is true
         */
        public boolean isNotEmptyConfig() {
<span class="nc bnc" id="L441" title="All 4 branches missed.">            return MapUtils.isNotEmpty(addParameters) || MapUtils.isNotEmpty(replaceParameterKeys)</span>
<span class="nc bnc" id="L442" title="All 4 branches missed.">                    || MapUtils.isNotEmpty(setParameters) || CollectionUtils.isNotEmpty(removeParameterKeys);</span>
        }
    }

    public class ShenyuCookie {
        private Map&lt;String, String&gt; addCookies;

        private Map&lt;String, String&gt; replaceCookieKeys;

        private Map&lt;String, String&gt; setCookies;

        private Set&lt;String&gt; removeCookieKeys;

        /**
         * no args constructor.
         */
<span class="nc" id="L458">        public ShenyuCookie() {</span>
<span class="nc" id="L459">        }</span>

        /**
         * all args constructor.
         *
         * @param addCookies        addCookies
         * @param replaceCookieKeys replaceCookieKeys
         * @param setCookies        setCookies
         * @param removeCookieKeys  removeCookieKeys
         */
        public ShenyuCookie(final Map&lt;String, String&gt; addCookies, final Map&lt;String, String&gt; replaceCookieKeys,
<span class="nc" id="L470">                            final Map&lt;String, String&gt; setCookies, final Set&lt;String&gt; removeCookieKeys) {</span>
<span class="nc" id="L471">            this.addCookies = addCookies;</span>
<span class="nc" id="L472">            this.replaceCookieKeys = replaceCookieKeys;</span>
<span class="nc" id="L473">            this.setCookies = setCookies;</span>
<span class="nc" id="L474">            this.removeCookieKeys = removeCookieKeys;</span>
<span class="nc" id="L475">        }</span>

        /**
         * get addCookies.
         *
         * @return addCookies
         */
        public Map&lt;String, String&gt; getAddCookies() {
<span class="nc" id="L483">            return addCookies;</span>
        }

        /**
         * set addCookies.
         *
         * @param addCookies addCookies
         */
        public void setAddCookies(final Map&lt;String, String&gt; addCookies) {
<span class="nc" id="L492">            this.addCookies = addCookies;</span>
<span class="nc" id="L493">        }</span>

        /**
         * get replaceCookieKeys.
         *
         * @return replaceCookieKeys
         */
        public Map&lt;String, String&gt; getReplaceCookieKeys() {
<span class="nc" id="L501">            return replaceCookieKeys;</span>
        }

        /**
         * set replaceCookieKeys.
         *
         * @param replaceCookieKeys replaceCookieKeys
         */
        public void setReplaceCookieKeys(final Map&lt;String, String&gt; replaceCookieKeys) {
<span class="nc" id="L510">            this.replaceCookieKeys = replaceCookieKeys;</span>
<span class="nc" id="L511">        }</span>

        /**
         * get setCookies.
         *
         * @return setCookies
         */
        public Map&lt;String, String&gt; getSetCookies() {
<span class="nc" id="L519">            return setCookies;</span>
        }

        /**
         * set setCookies.
         *
         * @param setCookies setCookies
         */
        public void setSetCookies(final Map&lt;String, String&gt; setCookies) {
<span class="nc" id="L528">            this.setCookies = setCookies;</span>
<span class="nc" id="L529">        }</span>

        /**
         * get removeCookieKeys.
         *
         * @return removeCookieKeys
         */
        public Set&lt;String&gt; getRemoveCookieKeys() {
<span class="nc" id="L537">            return removeCookieKeys;</span>
        }

        /**
         * set removeCookieKeys.
         *
         * @param removeCookieKeys removeCookieKeys
         */
        public void setRemoveCookieKeys(final Set&lt;String&gt; removeCookieKeys) {
<span class="nc" id="L546">            this.removeCookieKeys = removeCookieKeys;</span>
<span class="nc" id="L547">        }</span>

        @Override
        public boolean equals(final Object o) {
<span class="nc bnc" id="L551" title="All 2 branches missed.">            if (this == o) {</span>
<span class="nc" id="L552">                return true;</span>
            }
<span class="nc bnc" id="L554" title="All 4 branches missed.">            if (o == null || getClass() != o.getClass()) {</span>
<span class="nc" id="L555">                return false;</span>
            }
<span class="nc" id="L557">            ShenyuCookie that = (ShenyuCookie) o;</span>
<span class="nc bnc" id="L558" title="All 4 branches missed.">            return Objects.equals(addCookies, that.addCookies) &amp;&amp; Objects.equals(replaceCookieKeys, that.replaceCookieKeys)</span>
<span class="nc bnc" id="L559" title="All 4 branches missed.">                    &amp;&amp; Objects.equals(setCookies, that.setCookies) &amp;&amp; Objects.equals(removeCookieKeys, that.removeCookieKeys);</span>
        }

        @Override
        public int hashCode() {
<span class="nc" id="L564">            return Objects.hash(addCookies, replaceCookieKeys, setCookies, removeCookieKeys);</span>
        }

        @Override
        public String toString() {
<span class="nc" id="L569">            return &quot;ShenyuCookie{&quot;</span>
                    + &quot;addCookies=&quot;
                    + addCookies
                    + &quot;, replaceCookieKeys=&quot;
                    + replaceCookieKeys
                    + &quot;, setCookies=&quot;
                    + setCookies
                    + &quot;, removeCookieKeys=&quot;
                    + removeCookieKeys
                    + '}';
        }

        /**
         * is not empty config.
         *
         * @return not empty is true
         */
        public boolean isNotEmptyConfig() {
<span class="nc bnc" id="L587" title="All 4 branches missed.">            return MapUtils.isNotEmpty(addCookies) || MapUtils.isNotEmpty(replaceCookieKeys)</span>
<span class="nc bnc" id="L588" title="All 4 branches missed.">                    || MapUtils.isNotEmpty(setCookies) || CollectionUtils.isNotEmpty(removeCookieKeys);</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>